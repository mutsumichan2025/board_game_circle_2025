<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>BBS</title>

<style>
body{
 background: linear-gradient(90deg,red,orange,yellow,green,cyan,blue,violet);
 font-family:"MS Gothic","Comic Sans MS",sans-serif;
}

.title{
 font-size:36px;
 font-weight:bold;
 text-align:center;
 background:linear-gradient(90deg,#ffccff,#ccffff,#ffffcc);
 border:4px ridge purple;
 width:600px;
 margin:0 auto 15px auto;
 padding:10px;
}

table{
 width:600px;
 border-collapse:collapse;
 background:#ffffee;
}

th,td{
 border:3px ridge purple;
 padding:8px;
}

th{
 background:#ffccff;
}

.post{
 width:600px;
 border:3px dotted purple;
 background:#ffffcc;
 padding:8px;
 margin-bottom:10px;
}

.name{
 color:blue;
 font-weight:bold;
}

.date{
 font-size:12px;
 color:gray;
}

textarea{
 width:95%;
 height:80px;
}

button{
 font-weight:bold;
}
</style>

<script>
const API = "ここにGASのURL";

function loadBBS(){
 fetch(API)
  .then(r=>r.json())
  .then(data=>{
    let html="";
    for(let i=data.length-1;i>0;i--){
      html += `
      <div class="post">
        <div class="name">${data[i][0]}</div>
        <div class="date">${data[i][2]}</div>
        <div>${data[i][1]}</div>
      </div>`;
    }
    document.getElementById("log").innerHTML=html;
  });
}

function post(){
 let name=document.getElementById("name").value;
 let msg=document.getElementById("msg").value;

 if(name==""||msg==""){
   alert("入力してください");
   return;
 }

 fetch(API,{
   method:"POST",
   headers:{
     "Content-Type":"application/x-www-form-urlencoded"
   },
   body:`name=${encodeURIComponent(name)}&msg=${encodeURIComponent(msg)}`
 }).then(()=>{
   document.getElementById("msg").value="";
   loadBBS();
 });
}
</script>


</head>

<body onload="loadBBS()">
<center>

<div class="title">★ BBS ★</div>

<table>
<tr><th>名前</th></tr>
<tr><td><input id="name"></td></tr>

<tr><th>メッセージ</th></tr>
<tr><td><textarea id="msg"></textarea></tr>

<tr><td align="center">
<button onclick="post()">書き込む</button>
<button onclick="clearBBS()">全削除</button>
</td></tr>
</table>

<br>

<div id="log"></div>

<br>
<a href="index.html">トップへ戻る</a>

</center>
</body>
</html>



